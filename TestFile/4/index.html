<!DOCTYPE html>
<head>
    <title>encrypt/decrypt</title>
    <meta charset="utf-8" />
    <style>
        #text1{
            width: 50vw;
            height: 20vh;
        }
        #div1,#div2{
            background: bisque;
        }
    </style>
</head>
<body>
    <form></form>
    <input id="text1" type="text" />
    <br>
    <button id="btn1" onclick="btn1()">encrypt</button>
    <br><br>
    <div id="div1"></div>
    <div id="div2"></div>
    <script>
        function gebi(site){return document.getElementById(site);}
        var text1 = gebi("text1"),div1 = gebi("div1"),div2 = gebi("div2");
        function btn1(){
            var a = new Array;
            var ans = "",s = text1.value,ansn=0;
            for(var i=0;i<s.length;i++){
                a[i] = (s[i].charCodeAt()*2+(i-1>=0?a[i-1]:'0')+(i-99>=0?a[i-99]:'0')+(i&1<i?a[i&1]:'0'))%94;
                ans += String.fromCharCode(Number(a[i])+32);
                ansn = ansn*256+Number(a[i]+32);
            }
            console.log(ans);
            div1.innerHTML = String(ans);
            div2.innerHTML = String(ansn);
        }
    </script>
</body>